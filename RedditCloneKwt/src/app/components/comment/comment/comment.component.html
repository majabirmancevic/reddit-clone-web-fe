<div class="comment">
    <div class="comment-right-part" >
      <div class="comment-content">
        <div class="comment-author" style="font-weight: bold;">{{ comment.userName }}</div>
        <div>{{ comment.timestamp }}</div>
      </div>
      <div class="comment-text" *ngIf="!isEditing()"  >{{ comment.text }}</div>
      <app-comment-form
        *ngIf="isEditing()"
        submitLabel="Update"
        [hasCancelButton]="true"
        [initialText]="comment.text"
        (handleSubmit)="updateComment.emit({ text: $event, commentId: comment.id })"
        (handleCancel)="setActiveComment.emit(null)"
      ></app-comment-form>
      <div class="comment-actions">
        <div
          *ngIf="canReply"
          class="comment-action"
          (click)="
            setActiveComment.emit({
              id: comment.id,
              type: activeCommentType.replying
            })
          "
          style="font-style: italic; "
        >
          Reply
        </div>
        <div
          *ngIf="canEdit"
          class="comment-action"
          (click)="
            setActiveComment.emit({
              id: comment.id,
              type: activeCommentType.editing
            })
          "
          style="font-style: italic;"
        >
          Edit
        </div>
        <div
          *ngIf="canDelete"
          class="comment-action"
          (click)="deleteComment.emit(comment.id)"
          style="font-style: italic;"
        >
          Delete
        </div>
      </div>
      <app-comment-form
        *ngIf="isReplying()"
        submitLabel="Reply"
        (handleSubmit)="addComment.emit({ text: $event, parentId: replyId })"
      ></app-comment-form>
      <div class="replies" *ngIf="replies.length > 0">
        <app-comment
          *ngFor="let reply of replies"
          [comment]="reply"
          (setActiveComment)="setActiveComment.emit($event)"
          [activeComment]="activeComment"
          (updateComment)="updateComment.emit($event)"
          (deleteComment)="deleteComment.emit($event)"
          (addComment)="addComment.emit($event)"
          [parentId]="comment.id"
          [replies]="[]"
          [currentUserId]="currentUserId"
        ></app-comment>
      </div>
    </div>
  </div>